_format_version: "3.0"
_workspace: mtls
ca_certificates:
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBfDCCASKgAwIBAgIRAJqcZC1VSvSQLMN1+7yAeswwCgYIKoZIzj0EAwIwHDEa
    MBgGA1UEAxMRRGVtbyBLb25nIFJvb3QgQ0EwHhcNMjIwNjEzMTMzNzMzWhcNMjcw
    NjEzMTkzNzMzWjAcMRowGAYDVQQDExFEZW1vIEtvbmcgUm9vdCBDQTBZMBMGByqG
    SM49AgEGCCqGSM49AwEHA0IABOGR89IyhreSHRAi6wp9a5DBIDp4YYSdWzuEdlNx
    7pX1G4T7x68xUXJZXRUPFyT8Xzn5KwCJm8RVT+nAhrsUx6SjRTBDMA4GA1UdDwEB
    /wQEAwIBBjASBgNVHRMBAf8ECDAGAQH/AgECMB0GA1UdDgQWBBQ9CUiOPhjp7KD2
    ScRDxX4IzDOrNzAKBggqhkjOPQQDAgNIADBFAiEAw6Dov0c0L++1W9VufAfSMdNR
    PSDfPU0MiUiG59/VIBICIEFn/6c5eQc3hUUBL74/RmNT2b1zxBmp7RiPXJAnAAwJ
    -----END CERTIFICATE-----
  cert_digest: f1baffe9fe9cf8497e38a4271d67fab44423678b7e7c0f677a50f37c113d81b5
  id: e3bccd42-4505-4083-af56-f30e37382f25
  tags:
  - root-ca
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBqjCCAVGgAwIBAgIRAJY0Ek0UFa0wUjeMqWnkdYIwCgYIKoZIzj0EAwIwHDEa
    MBgGA1UEAxMRRGVtbyBLb25nIFJvb3QgQ0EwHhcNMjQwMzA3MTAxNDExWhcNMjUw
    MzA3MTYxNDExWjAqMSgwJgYDVQQDEx9EZW1vIEtvbmcgUm9vdCBJbnRlcm1lZGlh
    dGUxIENBMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE9bF9i/G13GP9a6kXgSjB
    Db+BZAX+TXAHZF7orTEXUMojR1KJmbEnl0l5rnRhK1vVW7C0/q38430eOTJZpOjM
    2KNmMGQwDgYDVR0PAQH/BAQDAgEGMBIGA1UdEwEB/wQIMAYBAf8CAQEwHQYDVR0O
    BBYEFM/x0HGjkl7ZKhMR2tTdQ6VxkYmMMB8GA1UdIwQYMBaAFD0JSI4+GOnsoPZJ
    xEPFfgjMM6s3MAoGCCqGSM49BAMCA0cAMEQCIAOvAQuRdqzH7o8jB3hGIhmC0mxv
    RVaz08t2P5FtztUUAiA8i3RFFonP/n4PFKXdu7kp/1stjHFpkWRjbsHoDVZhbQ==
    -----END CERTIFICATE-----
  cert_digest: e5aadbbc8618fd30245cd328b092b9a53f04e2e75f77a724a5c8daf9715da2d7
  id: e349dc07-a5b6-4480-a816-6ea64d6bf101
  tags:
  - intermediate_ca1
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBuDCCAV6gAwIBAgIQfh3pSHayuGmaFcpbGRHNsDAKBggqhkjOPQQDAjAqMSgw
    JgYDVQQDEx9EZW1vIEtvbmcgUm9vdCBJbnRlcm1lZGlhdGUxIENBMB4XDTI0MDMw
    NzEwMTQyN1oXDTI0MDkwNjAxMTQyN1owKjEoMCYGA1UEAxMfRGVtbyBLb25nIFJv
    b3QgSW50ZXJtZWRpYXRlMiBDQTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABIZA
    zUIpEVz063+YURIbYJr8soCuk07M8BW4HdAB/6EI3sUil4zOszqrlpCOU4IiTQRt
    in2unvXfZ8E8WBwe12GjZjBkMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAG
    AQH/AgEAMB0GA1UdDgQWBBROOu1R/x9ahI8j6LHjXsa0AnewgzAfBgNVHSMEGDAW
    gBTP8dBxo5Je2SoTEdrU3UOlcZGJjDAKBggqhkjOPQQDAgNIADBFAiEA1bwmIMVo
    JR29uCoZCWObkQ1QbdcVfVbso4f2+TnVAtACIGX8t6MUjr1TDNJJ2kd7UEfO9J+E
    +NqU6xdDfztzZwzk
    -----END CERTIFICATE-----
  cert_digest: a63868c6d092a5c6f629276a4c2eb5636e790d1521e791a019666db995b30016
  id: 9c3f8505-e4b4-455d-aecb-2e75f3aff60b
  tags:
  - intermediate_ca2
certificates:
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIB0TCCAXigAwIBAgIRANFlr7Kk8cnpfxHGYxgecB0wCgYIKoZIzj0EAwIwKjEo
    MCYGA1UEAxMfRGVtbyBLb25nIFJvb3QgSW50ZXJtZWRpYXRlMiBDQTAeFw0yNDAz
    MDcxMDE1MTVaFw0yNDA5MDYwMTE1MTVaMBoxGDAWBgNVBAMTD2NsaWVudC5rb25n
    LmxhbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABMgY9oA3wGOZc5+v0A2IOZDA
    8hD3rAhcFM/jURIWb/WPpzknbL2a7rncfUTvfF3Ozpfas9QL2A0uhrHb9aua2vSj
    gY4wgYswDgYDVR0PAQH/BAQDAgeAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEF
    BQcDAjAdBgNVHQ4EFgQU2tF+IyR1dt/0Ro148sN9yJ8rNDAwHwYDVR0jBBgwFoAU
    TjrtUf8fWoSPI+ix417GtAJ3sIMwGgYDVR0RBBMwEYIPY2xpZW50LmtvbmcubGFu
    MAoGCCqGSM49BAMCA0cAMEQCIBllSVUXh/QbHPqpDJHv0XQAf7F536rEYnn5teE0
    4I0jAiBAVgvcNNXIcntOhLqgycwP7hgNRPTQZLSL8UbgD6Pl0g==
    -----END CERTIFICATE-----
    -----BEGIN CERTIFICATE-----
    MIIBuDCCAV6gAwIBAgIQfh3pSHayuGmaFcpbGRHNsDAKBggqhkjOPQQDAjAqMSgw
    JgYDVQQDEx9EZW1vIEtvbmcgUm9vdCBJbnRlcm1lZGlhdGUxIENBMB4XDTI0MDMw
    NzEwMTQyN1oXDTI0MDkwNjAxMTQyN1owKjEoMCYGA1UEAxMfRGVtbyBLb25nIFJv
    b3QgSW50ZXJtZWRpYXRlMiBDQTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABIZA
    zUIpEVz063+YURIbYJr8soCuk07M8BW4HdAB/6EI3sUil4zOszqrlpCOU4IiTQRt
    in2unvXfZ8E8WBwe12GjZjBkMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAG
    AQH/AgEAMB0GA1UdDgQWBBROOu1R/x9ahI8j6LHjXsa0AnewgzAfBgNVHSMEGDAW
    gBTP8dBxo5Je2SoTEdrU3UOlcZGJjDAKBggqhkjOPQQDAgNIADBFAiEA1bwmIMVo
    JR29uCoZCWObkQ1QbdcVfVbso4f2+TnVAtACIGX8t6MUjr1TDNJJ2kd7UEfO9J+E
    +NqU6xdDfztzZwzk
    -----END CERTIFICATE-----
  id: c049b73b-df7f-4013-8898-c270200f8003
  key: |-
    -----BEGIN EC PRIVATE KEY-----
    MHcCAQEEIHQjy1akzD2xGW8tcGXXpIppCdcefA1kLB+i/BDep1e2oAoGCCqGSM49
    AwEHoUQDQgAEyBj2gDfAY5lzn6/QDYg5kMDyEPesCFwUz+NREhZv9Y+nOSdsvZru
    udx9RO98Xc7Ol9qz1AvYDS6Gsdv1q5ra9A==
    -----END EC PRIVATE KEY-----
  snis:
  - id: dd647d0e-cb11-431d-a07d-ed56517b506d
    name: client.kong.lan
  tags:
  - client.kong.lan
consumers:
- custom_id: mtls_id
  id: 020c10c0-858f-4507-840b-d28692545fb0
  username: mtls-consumer
services:
- connect_timeout: 60000
  enabled: true
  host: httpbin
  id: 17ae005b-3465-4e15-a649-59d64b9a5c24
  name: local-httpbin
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    id: b42e4ba5-f3c0-448b-8e73-efe38f50f95e
    name: local-httpbin
    path_handling: v0
    paths:
    - /auth/mtls
    plugins:
    - config:
        allow_partial_chain: false
        anonymous: null
        authenticated_group_by: CN
        ca_certificates:
        - e3bccd42-4505-4083-af56-f30e37382f25
        - e349dc07-a5b6-4480-a816-6ea64d6bf101
        - 9c3f8505-e4b4-455d-aecb-2e75f3aff60b
        cache_ttl: 60
        cert_cache_ttl: 60000
        consumer_by:
        - username
        - custom_id
        http_proxy_host: null
        http_proxy_port: null
        http_timeout: 30000
        https_proxy_host: null
        https_proxy_port: null
        revocation_check_mode: IGNORE_CA_ERROR
        send_ca_dn: false
        skip_consumer_lookup: false
      enabled: true
      id: 0af92263-9f50-48df-a013-d29955cf260d
      name: mtls-auth
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    snis:
    - client.kong.lan
    strip_path: true
  write_timeout: 60000
