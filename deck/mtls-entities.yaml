_format_version: "3.0"
_workspace: mtls
ca_certificates:
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBfDCCASKgAwIBAgIRAJqcZC1VSvSQLMN1+7yAeswwCgYIKoZIzj0EAwIwHDEa
    MBgGA1UEAxMRRGVtbyBLb25nIFJvb3QgQ0EwHhcNMjIwNjEzMTMzNzMzWhcNMjcw
    NjEzMTkzNzMzWjAcMRowGAYDVQQDExFEZW1vIEtvbmcgUm9vdCBDQTBZMBMGByqG
    SM49AgEGCCqGSM49AwEHA0IABOGR89IyhreSHRAi6wp9a5DBIDp4YYSdWzuEdlNx
    7pX1G4T7x68xUXJZXRUPFyT8Xzn5KwCJm8RVT+nAhrsUx6SjRTBDMA4GA1UdDwEB
    /wQEAwIBBjASBgNVHRMBAf8ECDAGAQH/AgECMB0GA1UdDgQWBBQ9CUiOPhjp7KD2
    ScRDxX4IzDOrNzAKBggqhkjOPQQDAgNIADBFAiEAw6Dov0c0L++1W9VufAfSMdNR
    PSDfPU0MiUiG59/VIBICIEFn/6c5eQc3hUUBL74/RmNT2b1zxBmp7RiPXJAnAAwJ
    -----END CERTIFICATE-----
  cert_digest: f1baffe9fe9cf8497e38a4271d67fab44423678b7e7c0f677a50f37c113d81b5
  id: e3bccd42-4505-4083-af56-f30e37382f25
  tags:
  - root-ca
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBqjCCAVCgAwIBAgIQQWShkk03eVYEufcBsSePaDAKBggqhkjOPQQDAjAcMRow
    GAYDVQQDExFEZW1vIEtvbmcgUm9vdCBDQTAeFw0yMzAzMDYxMTIxNTdaFw0yNDAz
    MDUxNzIxNTdaMCoxKDAmBgNVBAMTH0RlbW8gS29uZyBSb290IEludGVybWVkaWF0
    ZTEgQ0EwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARLchnFctnz7DUehDvINMKz
    9EfLY4bLPJoGGMgFCa9/Oo1r3nsWpkjfk9qDCfdemyt+Si8FkcpvvU9ECz9rrFZg
    o2YwZDAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH/BAgwBgEB/wIBATAdBgNVHQ4E
    FgQUrXhDVxTxVU0np2x3E7Wx6neTxkkwHwYDVR0jBBgwFoAUPQlIjj4Y6eyg9knE
    Q8V+CMwzqzcwCgYIKoZIzj0EAwIDSAAwRQIgDTvKUsEvEsnTFL6c7e3CyJmQ1O2h
    ahVsyUhJ+ScJFWsCIQCJKbPoH9m/1n22B4p+qo2OqD55rufCFDt4VB+jfvMF+A==
    -----END CERTIFICATE-----
  cert_digest: 7a169fee42d0272eca26c9fe153bada0d36892fc373b898b2b8923ec8a63b695
  id: e349dc07-a5b6-4480-a816-6ea64d6bf101
  tags:
  - intermediate_ca1
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIBuTCCAV6gAwIBAgIQPdhMGtUKOTSKlLmvP5ZLfjAKBggqhkjOPQQDAjAqMSgw
    JgYDVQQDEx9EZW1vIEtvbmcgUm9vdCBJbnRlcm1lZGlhdGUxIENBMB4XDTIzMDkx
    OTEwMzIwNloXDTI0MDMyMDAxMzIwNlowKjEoMCYGA1UEAxMfRGVtbyBLb25nIFJv
    b3QgSW50ZXJtZWRpYXRlMiBDQTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABAu/
    WghfwVBJD0WGWRazqQBL56orKCsr+oVgI33X24vW/ZzYFghOr1ZOj/vDGZPJTNwR
    IVu6Z61CN/gQQW2yYLKjZjBkMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAG
    AQH/AgEAMB0GA1UdDgQWBBR6heBKywrkJp99nuoSIlo6PFxxxzAfBgNVHSMEGDAW
    gBSteENXFPFVTSenbHcTtbHqd5PGSTAKBggqhkjOPQQDAgNJADBGAiEAtVIOh8F8
    FwpXis0tBnAw4QuX5JdqIw50cY53PEf1/P8CIQDqO1r7ZLfGahb3Xzo0wKbAdyGN
    HcKAd32RQoBE7aUf6Q==
    -----END CERTIFICATE-----
  cert_digest: fdbe005dd7061b1eaf02ece070c91e1a8e634a1b3bcacfd37597ce8adfa9147c
  id: 9c3f8505-e4b4-455d-aecb-2e75f3aff60b
  tags:
  - intermediate_ca2
certificates:
- cert: |-
    -----BEGIN CERTIFICATE-----
    MIIB0DCCAXegAwIBAgIQbsabPWnwnnPA1zkpSwfKATAKBggqhkjOPQQDAjAqMSgw
    JgYDVQQDEx9EZW1vIEtvbmcgUm9vdCBJbnRlcm1lZGlhdGUyIENBMB4XDTIyMDIy
    MzE2NDE0M1oXDTIzMDIyMzE2NDE0M1owGjEYMBYGA1UEAxMPY2xpZW50Lmtvbmcu
    bGFuMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEljIUT9Nf5CyZ1WcfTB39rOG1
    +84afZ1B46gLukZbrvCkMPU+6av/blMVEH5gLSMCsQ/Yxlm4K8gljLk5S62m5qOB
    jjCBizAOBgNVHQ8BAf8EBAMCB4AwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUF
    BwMCMB0GA1UdDgQWBBQ9rsPmK/zxxeF2pjck9jzGtY5LFTAfBgNVHSMEGDAWgBQ/
    Z+KrHUB8FE3+b5v6T2BxKhHZwjAaBgNVHREEEzARgg9jbGllbnQua29uZy5sYW4w
    CgYIKoZIzj0EAwIDRwAwRAIgbhUcCFueuirpVDMFl/yfiuLjb1qcXVmsCOOqYWWC
    4tICIFhYaRa3jW3dZ+lrlLo9I1dw06FtGmSlkT2cb1MIFySc
    -----END CERTIFICATE-----
    -----BEGIN CERTIFICATE-----
    MIIBuDCCAV+gAwIBAgIRAIAFE2awF2br6XAMJHSwUz4wCgYIKoZIzj0EAwIwKjEo
    MCYGA1UEAxMfRGVtbyBLb25nIFJvb3QgSW50ZXJtZWRpYXRlMSBDQTAeFw0yMjAy
    MjMxNTMxNDJaFw0zMjAyMjExNTMxNDJaMCoxKDAmBgNVBAMTH0RlbW8gS29uZyBS
    b290IEludGVybWVkaWF0ZTIgQ0EwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARe
    76h4GWFA7kbMnyn9e7yUMDFa0rmr8IxXZesfX3H5P8APSVX9glQQ+FFFrVnYhepv
    W3AYcpz4vdgpUOYRbmjAo2YwZDAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH/BAgw
    BgEB/wIBADAdBgNVHQ4EFgQUP2fiqx1AfBRN/m+b+k9gcSoR2cIwHwYDVR0jBBgw
    FoAUNwKbUsy3Lkpwe1h2lRMAnTLzUgQwCgYIKoZIzj0EAwIDRwAwRAIgb37PGFsr
    4Xw3Hh1vfD3x65riEcQ9p/mpuP3YFcuEirgCIDKNk2EyYTvTzyUgbrkHuLPc7kgk
    OxhBuiyTmfSrXUCq
    -----END CERTIFICATE-----
  id: c049b73b-df7f-4013-8898-c270200f8003
  key: |-
    -----BEGIN EC PRIVATE KEY-----
    MHcCAQEEIJfAp8x8G2LmAPpuGtBEpN4UnIQInIzEBIXxiViQYY0ioAoGCCqGSM49
    AwEHoUQDQgAEljIUT9Nf5CyZ1WcfTB39rOG1+84afZ1B46gLukZbrvCkMPU+6av/
    blMVEH5gLSMCsQ/Yxlm4K8gljLk5S62m5g==
    -----END EC PRIVATE KEY-----
  snis:
  - id: dd647d0e-cb11-431d-a07d-ed56517b506d
    name: client.kong.lan
  tags:
  - client.kong.lan
consumers:
- custom_id: mtls_id
  id: 020c10c0-858f-4507-840b-d28692545fb0
  username: mtls-consumer
services:
- connect_timeout: 60000
  enabled: true
  host: kongpose_httpbin_1
  id: 17ae005b-3465-4e15-a649-59d64b9a5c24
  name: local-httpbin
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    id: b42e4ba5-f3c0-448b-8e73-efe38f50f95e
    name: local-httpbin
    path_handling: v0
    paths:
    - /auth/mtls
    plugins:
    - config:
        allow_partial_chain: false
        anonymous: null
        authenticated_group_by: CN
        ca_certificates:
        - f1c55c85-9871-420c-9444-50b690779a61
        - d8ac4c57-edf1-4d15-8741-c9e8795ce6e5
        - cf3a7a80-b488-4529-8700-439d5d2baa72
        cache_ttl: 60
        cert_cache_ttl: 60000
        consumer_by:
        - username
        - custom_id
        http_proxy_host: null
        http_proxy_port: null
        http_timeout: 30000
        https_proxy_host: null
        https_proxy_port: null
        revocation_check_mode: IGNORE_CA_ERROR
        send_ca_dn: false
        skip_consumer_lookup: false
      enabled: true
      id: 0af92263-9f50-48df-a013-d29955cf260d
      name: mtls-auth
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    snis:
    - client.kong.lan
    strip_path: true
  write_timeout: 60000
